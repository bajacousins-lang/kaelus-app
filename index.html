<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>BCNTV Ultimate Experience</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
:root {
    --bg: #0a0a0a; --card: #161616;
    --accent-sport: #00ff88; --accent-movie: #ff3e3e; --accent-series: #00e1ff;
    --text-main: #ffffff; --text-dim: #888888;
}
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background-color: var(--bg); color: var(--text-main); margin: 0; padding: 0; overflow-x: hidden; user-select: none;
}
.header-container { position: sticky; top: 0; background: rgba(10, 10, 10, 0.85); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); z-index: 1000; padding: 15px; border-bottom: 1px solid #222; }
#buscador { width: 100%; box-sizing: border-box; background: #1e1e1e; border: 1px solid #333; border-radius: 12px; padding: 12px 15px; color: white; font-size: 16px; outline: none; transition: border 0.3s; }
#buscador:focus { border-color: var(--accent-sport); }
.filter-group { display: flex; gap: 8px; overflow-x: auto; padding: 12px 0 5px 0; scrollbar-width: none; }
.filter-group::-webkit-scrollbar { display: none; }
.f-btn { background: #222; border: none; color: #888; padding: 8px 18px; border-radius: 20px; white-space: nowrap; font-size: 13px; font-weight: 600; cursor: pointer; transition: 0.3s; }
.f-btn.active { background: white; color: black; }
#main-container { padding: 15px; }
.card { background: var(--card); border-radius: 18px; padding: 18px; margin-bottom: 15px; position: relative; border: 1px solid #252525; animation: fadeIn 0.5s ease forwards; display: flex; flex-direction: column; gap: 8px; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
.tag { font-size: 10px; font-weight: 800; padding: 4px 10px; border-radius: 6px; width: fit-content; text-transform: uppercase; letter-spacing: 0.5px; }
.tag-deporte { background: rgba(0, 255, 136, 0.1); color: var(--accent-sport); }
.tag-pelicula { background: rgba(255, 62, 62, 0.1); color: var(--accent-movie); }
.tag-serie { background: rgba(0, 225, 255, 0.1); color: var(--accent-series); }
.title { font-size: 18px; font-weight: 700; line-height: 1.3; }
.meta { font-size: 13px; color: var(--text-dim); }
.notify-btn { background: transparent; border: 1px solid #444; color: white; padding: 10px; border-radius: 10px; margin-top: 10px; font-size: 14px; font-weight: 500; display: flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer; }
.notify-btn:active { background: #333; transform: scale(0.98); }
.skeleton { height: 120px; background: linear-gradient(90deg, #161616 25%, #222 50%, #161616 75%); background-size: 200% 100%; animation: skeleton-loading 1.5s infinite; border-radius: 18px; margin-bottom: 15px; }
@keyframes skeleton-loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
</style>
</head>
<body>
<div class="header-container">
<center><img src="https://raw.githubusercontent.com/bajacousins-lang/kaelus-app/main/logo.png" style="width:60px; margin-bottom: 15px;"></center>
<input type="text" id="buscador" placeholder="Buscar partidos, pel√≠culas..." onkeyup="render()">
<div class="filter-group">
<button class="f-btn active" onclick="setFiltro('todos', this)">Todos</button>
<button class="f-btn" onclick="setFiltro('deporte', this)">Deportes</button>
<button class="f-btn" onclick="setFiltro('pelicula', this)">Pel√≠culas</button>
<button class="f-btn" onclick="setFiltro('serie', this)">Series</button>
</div>
<div id="sub-filtros" class="filter-group"></div>
</div>
<div id="main-container">
<div class="skeleton"></div>
<div class="skeleton"></div>
<div class="skeleton"></div>
</div>
<script>
const tg = window.Telegram.WebApp; tg.expand(); tg.headerColor="#0a0a0a"; tg.backgroundColor="#0a0a0a";
let fullData = []; let currentFiltro='todos'; let currentSubFiltro=null;

async function cargarDatos() {
    try { const response = await fetch('eventos.json?v=' + Date.now()); fullData = await response.json(); generarSubFiltros(); render(); }
    catch { document.getElementById('main-container').innerHTML = "<p style='text-align:center;color:gray;'>Error al cargar la cartelera.</p>"; }
}
function setFiltro(tipo, btn){ currentFiltro=tipo; currentSubFiltro=null; document.querySelectorAll('.f-btn').forEach(b=>b.classList.remove('active')); btn.classList.add('active'); render(); }
function generarSubFiltros(){ const subContainer=document.getElementById('sub-filtros'); const keywords=["NBA","F1","UFC","LIGA","CHAMPIONS","MLB","BOXEO"]; subContainer.innerHTML=keywords.filter(k=>fullData.some(item=>item.evento.toUpperCase().includes(k))).map(k=>`<button class="f-btn" onclick="filtrarLiga('${k}', this)">${k}</button>`).join(''); }
function filtrarLiga(liga, btn){ currentSubFiltro=liga; document.querySelectorAll('#sub-filtros .f-btn').forEach(b=>b.classList.remove('active')); btn.classList.add('active'); render(); }
function solicitarAviso(evento){ const data={action:"NOTIFY",evento:evento}; tg.sendData(JSON.stringify(data)); }
function render(){
    const container=document.getElementById('main-container'); const busqueda=document.getElementById('buscador').value.toLowerCase(); container.innerHTML='';
    const filtrados=fullData.filter(item=>{ const nombre=item.evento.toLowerCase(); const tipo=nombre.includes(' vs ')?'deporte':(nombre.includes('serie:')?'serie':'pelicula'); return nombre.includes(busqueda) && (currentFiltro==='todos'||tipo===currentFiltro) && (!currentSubFiltro || nombre.toUpperCase().includes(currentSubFiltro)); });
    if(filtrados.length===0){ container.innerHTML="<p style='text-align:center;color:gray;margin-top:20px;'>No se encontraron eventos.</p>"; return; }
    filtrados.forEach((item,index)=>{ const esDep=item.evento.toLowerCase().includes(' vs '); const esSer=item.evento.toLowerCase().includes('serie:'); const tipo=esDep?'deporte':(esSer?'serie':'pelicula'); const card=document.createElement('div'); card.className='card'; card.style.animationDelay=`${index*0.05}s`; const tituloLimpio=item.evento.replace(/serie:|pelicula:/i,'').split(' por ')[0].trim(); card.innerHTML=`<div class="tag tag-${tipo}">${tipo}</div><div class="title">${esDep?'‚öΩ':(esSer?'üì∫':'üé¨')} ${tituloLimpio}</div><div class="meta">üìç Disponible en Kaelus Premium</div>${esDep?`<button class="notify-btn" onclick="solicitarAviso('${tituloLimpio}')">üîî Avisarme al iniciar</button>`:''}`; container.appendChild(card); });
}
setTimeout(cargarDatos,800);
</script>
</body>
</html>
