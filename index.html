<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>BCNTV Ultimate Experience</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root {
    --bg:#0a0a0a;--card:#161616;
    --accent-sport:#00ff88;--accent-movie:#ff3e3e;--accent-series:#00e1ff;
    --text-main:#fff;--text-dim:#888;
}
body{
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
    background:var(--bg);color:var(--text-main);
    margin:0;user-select:none;
}
.header-container{
    position:sticky;top:0;z-index:1000;
    background:rgba(10,10,10,.85);
    backdrop-filter:blur(15px);
    padding:15px;border-bottom:1px solid #222;
}
#buscador{
    width:100%;background:#1e1e1e;border:1px solid #333;
    border-radius:12px;padding:12px 15px;color:white;
    font-size:16px;outline:none;
}
.filter-group{display:flex;gap:8px;overflow-x:auto;padding:12px 0}
.f-btn{
    background:#222;border:none;color:#888;
    padding:8px 18px;border-radius:20px;
    font-size:13px;font-weight:600;
}
.f-btn.active{background:white;color:black}
#main-container{padding:15px}
.card{
    background:var(--card);border-radius:18px;
    padding:18px;margin-bottom:15px;
    border:1px solid #252525;
    animation:fadeIn .4s ease forwards;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1}}
.tag{font-size:10px;font-weight:800;padding:4px 10px;border-radius:6px;text-transform:uppercase}
.tag-deporte{background:rgba(0,255,136,.1);color:var(--accent-sport)}
.tag-pelicula{background:rgba(255,62,62,.1);color:var(--accent-movie)}
.tag-serie{background:rgba(0,225,255,.1);color:var(--accent-series)}
.title{font-size:18px;font-weight:700}
.meta{font-size:13px;color:var(--text-dim)}
.notify-btn{
    margin-top:10px;border:1px solid #444;
    background:transparent;color:white;
    padding:10px;border-radius:10px;
}
.skeleton{
    height:120px;border-radius:18px;margin-bottom:15px;
    background:linear-gradient(90deg,#161616 25%,#222 50%,#161616 75%);
    background-size:200% 100%;animation:load 1.4s infinite;
}
@keyframes load{to{background-position:-200% 0}}
</style>
</head>

<body>
<div class="header-container">
<center>
<img src="https://raw.githubusercontent.com/bajacousins-lang/kaelus-app/main/logo.png" style="width:60px;margin-bottom:15px">
</center>

<input id="buscador" placeholder="Buscar partidos, pelÃ­culas..." onkeyup="render()">

<div class="filter-group">
<button class="f-btn active" onclick="setFiltro('todos',this)">Todos</button>
<button class="f-btn" onclick="setFiltro('deporte',this)">Deportes</button>
<button class="f-btn" onclick="setFiltro('pelicula',this)">PelÃ­culas</button>
<button class="f-btn" onclick="setFiltro('serie',this)">Series</button>
</div>
</div>

<div id="main-container">
<div class="skeleton"></div>
<div class="skeleton"></div>
<div class="skeleton"></div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const API_URL = "https://TU-SERVICIO.onrender.com/api/data";

let fullData = [];
let currentFiltro = "todos";

async function cargarDatos(){
    try{
        const res = await fetch(API_URL);
        const data = await res.json();

        fullData = [
            ...data.deportes.map(e => ({tipo:"deporte", titulo:e})),
            ...data.peliculas.map(e => ({tipo:"pelicula", titulo:e})),
            ...data.series.map(e => ({tipo:"serie", titulo:e}))
        ];
        render();
    }catch(e){
        document.getElementById("main-container").innerHTML =
        "<p style='text-align:center;color:gray'>Error cargando datos</p>";
    }
}

function setFiltro(tipo,btn){
    currentFiltro = tipo;
    document.querySelectorAll(".f-btn").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    render();
}

function render(){
    const c = document.getElementById("main-container");
    const q = document.getElementById("buscador").value.toLowerCase();
    c.innerHTML = "";

    const items = fullData.filter(i =>
        i.titulo.toLowerCase().includes(q) &&
        (currentFiltro==="todos" || i.tipo===currentFiltro)
    );

    if(!items.length){
        c.innerHTML="<p style='text-align:center;color:gray'>Sin resultados</p>";
        return;
    }

    items.forEach((i,idx)=>{
        const card=document.createElement("div");
        card.className="card";
        card.style.animationDelay=`${idx*0.04}s`;
        card.innerHTML=`
        <div class="tag tag-${i.tipo}">${i.tipo}</div>
        <div class="title">${i.tipo==="deporte"?"âš½":i.tipo==="serie"?"ðŸ“º":"ðŸŽ¬"} ${i.titulo}</div>
        <div class="meta">Disponible en Kaelus Premium</div>
        ${i.tipo==="deporte"?
        `<button class="notify-btn" onclick="tg.sendData('${i.titulo}')">ðŸ”” Avisarme</button>`:""}
        `;
        c.appendChild(card);
    });
}

cargarDatos();
</script>
</body>
</html>
